# 需求规格说明

## 用户需求
一个猜数字游戏，1-100之间随机生成数字，用户输入猜测，程序提示太大或太小，猜对后显示用了几次

## 技术规格
# 猜数字游戏 - 技术规范文档

## 1. 核心功能与特性

### 1.1 功能概述
开发一个经典的猜数字（Guessing Number）游戏程序。程序在1-100的范围内随机生成一个整数作为目标数字，玩家通过输入猜测来尝试猜中该数字，程序根据每次猜测反馈提示信息，直至玩家猜中为止。

### 1.2 功能清单

| 功能模块 | 功能描述 | 优先级 |
|---------|---------|--------|
| 随机数生成 | 游戏开始时在[1, 100]区间内随机生成目标数字 | P0 |
| 用户输入 | 接收玩家通过键盘输入的数字猜测 | P0 |
| 猜测比较 | 将玩家输入与目标数字进行比较 | P0 |
| 反馈提示 | 根据比较结果输出"太大"、"太小"或"正确" | P0 |
| 猜测计数 | 记录并最终显示玩家猜测的总次数 | P0 |
| 游戏重玩 | 提供重新开始游戏的功能选项 | P1 |
| 输入验证 | 检查输入的有效性（数字范围、格式） | P1 |

---

## 2. 技术需求与约束

### 2.1 运行环境
- **Python版本**: 3.7+
- **操作系统**: Windows / macOS / Linux (跨平台兼容)
- **运行方式**: 命令行/终端执行

### 2.2 外部依赖
- **标准库**: `random`（随机数生成）
- **无第三方依赖**: 本游戏仅使用Python标准库即可实现

### 2.3 设计约束
- 输入必须为有效的整数
- 猜测次数统计应准确反映实际尝试次数
- 游戏流程应清晰，用户体验友好
- 程序应具备完善的错误处理能力

---

## 3. 数据结构与算法

### 3.1 数据结构

```
┌─────────────────────────────────────────────┐
│                  游戏状态                     │
├─────────────────────────────────────────────┤
│ target_number: int    # 目标数字 (1-100)     │
│ guess_count: int      # 当前猜测次数         │
│ min_range: int = 1    # 猜测范围下界         │
│ max_range: int = 100  # 猜测范围上界         │
└─────────────────────────────────────────────┘
```

### 3.2 核心算法

#### 3.2.1 随机数生成算法
```python
import random
target_number = random.randint(1, 100)
```

#### 3.2.2 二分查找策略（理论最优解）
理论上，玩家可采用二分查找策略，在最坏情况下只需 $\lceil \log_2(100) \rceil = 7$ 次即可猜中。但本游戏**不强制**玩家使用此策略，允许任意猜测方式。

#### 3.2.3 流程图
```
┌──────────┐
│   开始   │
└────┬─────┘
     ▼
┌──────────────────┐
│ 生成随机目标数字  │
│ (1-100)          │
└────┬─────────────┘
     ▼
┌──────────────────┐
│ 猜测计数器=0     │
└────┬─────────────┘
     ▼
┌──────────────────┐
│ 提示用户输入数字 │
└────┬─────────────┘
     ▼
┌──────────────────┐
│ 输入验证         │
│ 无效?→重新输入   │
└────┬─────────────┘
     ▼
┌──────────────────┐
│ 计数器+1         │
└────┬─────────────┘
     ▼
┌──────────────────┐
│ 与目标数字比较   │
└────┬─────────────┘
     ▼
┌──────────────────────────────────┐
│ 输入 < 目标? → "太小了，请重试"  │
│ 输入 > 目标? → "太大了，请重试"  │
│ 输入 = 目标? → 猜对了！          │
└──────────────────────────────────┘
                          │
           ┌──────────────┼──────────────┐
           ▼              ▼              ▼
      "太小"→继续     "太大"→继续     胜利
           │              │              │
           └──────────────┴──────────────┘
                               ▼
                    ┌─────────────────────┐
                    │ 显示猜测次数        │
                    │ 询问是否重新开始    │
                    └─────────────────────┘
```

---

## 4. 用户界面与交互模式

### 4.1 交互流程

```
╔════════════════════════════════════════════════════════╗
║                    猜数字游戏 v1.0                      ║
╠════════════════════════════════════════════════════════╣
║  规则：我想了一个1到100之间的数字，请猜猜看！            ║
║                                                        ║
║  ───────────────────────────────────────────────────── ║
║  请输入你的猜测 (1-100): 50                             ║
║  太大了！再试一次。                                     ║
║                                                        ║
║  请输入你的猜测 (1-100): 25                             ║
║ 太小了！再试一次。                                      ║
║                                                        ║
║  请输入你的猜测 (1-100): 37                             ║
║  恭喜！你猜对了！                                       ║
║ 你总共猜测了 3 次。                                     ║
║                                                        ║
║  是否再来一局? (y/n): y                                ║
╚════════════════════════════════════════════════════════╝
```

### 4.2 提示信息规范

| 场景 | 提示内容 |
|------|---------|
| 首次启动 | 友好的欢迎语及游戏规则说明 |
| 猜测过大 | "太大了！再试一次。" |
| 猜测过小 | "太小了！再试一次。" |
| 猜测正确 | "恭喜！你猜对了！" + 猜测次数统计 |
| 无效输入 | "无效输入，请输入1-100之间的整数。" |
| 游戏结束 | "游戏结束，感谢游玩！" |

---

## 5. 错误处理与边界情况

### 5.1 错误类型与处理策略

| 错误类型 | 示例 | 处理方式 |
|---------|------|---------|
| 非数字输入 | "abc", "12.5" | 提示"请输入有效的整数"，不计入猜测次数 |
| 超出范围 | 0, 101, -5 | 提示"请输入1-100之间的数字"，不计入次数 |
| 空输入 | 直接回车 | 提示"请输入一个数字"，不计入次数 |
| 特殊字符 | "!@#$" | 视为非数字输入处理 |

### 5.2 边界情况处理

```python
# 输入范围验证
def validate_input(user_input: str, min_val: int = 1, max_val: int = 100) -> tuple:
    """
    验证用户输入
    Returns: (is_valid: bool, number: int or None, message: str)
    """
    # 1. 检查是否为空
    if not user_input.strip():
        return False, None, "输入不能为空，请输入一个数字。"
    
    # 2. 检查是否为有效整数
    try:
        number = int(user_input)
    except ValueError:
        return False, None, f"'{user_input}' 不是有效的整数，请输入数字。"
    
    # 3. 检查范围
    if number < min_val or number > max_val:
        return False, None, f"请输入{min_val}-{max_val}之间的数字。"
    
    return True, number, "输入有效"
```

---

## 6. 性能考量

### 6.1 时间复杂度
- **输入验证**: O(1)
- **数字比较**: O(1)
- **总体复杂度**: O(n)，其中n为猜测次数（用户最多需100次猜完所有数字）

### 6.2 空间复杂度
- **常量空间**: O(1)，仅存储目标数字、计数器等少量变量
- **无大数据量处理**: 程序对内存无特殊要求

### 6.3 优化建议
- 使用 `random.randint(1, 100)` 直接生成，无需额外计算
- 输入验证采用异常处理机制，效率高
- 无需保存历史记录（除非扩展功能要求）

---

## 7. 扩展功能建议（可选）

| 功能 | 描述 | 复杂度 |
|------|------|--------|
| 猜测历史 | 显示玩家之前的猜测记录 | 低 |
| 最佳记录 | 保存历史游戏的最少猜测次数 | 低 |
| 难度选择 | 1-50, 1-100, 1-1000
